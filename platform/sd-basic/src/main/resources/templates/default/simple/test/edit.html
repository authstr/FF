<!doctype html>
<html>
<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta http-equiv="content-type" content="text/html;charset=utf-8">
		<meta content="always" name="referrer">
		<#include "../common/header.html">
</head>
<body>
	<div class="J_conWarp g-lr-mg g-warning-box">
		<h4 class="g-title"> <a href="javascript:history.back()" style="font-size: 16px; color: black; " >< 返回</a></h4>
		<div class="J_containerWarp">
			<div  class="container-fluid g-t-mg2">
				<div class="row" >
					<div class="layui-col-md6" >
						<form class="form-horizontal" role="form" id="form1">
							<input type="hidden" name="id" id="id" value="${id!?html}"/>
							<div class="layui-form-item">
								<label class="layui-form-label "><em class="text-red">*</em>用户名</label>
								<div class=" layui-input-inline" style="width: 500px">
									<input type="text"  name="username" id="username"  placeholder="请输入用户名" lay-verify="required" autocomplete="off" class="layui-input">
								</div>
							</div>


							<div class="layui-form-item">
								<label class="layui-form-label"><em class="text-red">*</em>密码</label>
								<div class=" layui-input-inline" style="width: 500px">
									<input type="text"  name="password" id="password"  placeholder="请输入密码" lay-verify="required" autocomplete="off" class="layui-input">
								</div>
							</div>


							<div class="layui-form-item">
								<label class="layui-form-label">手机号</label>
								<div class=" layui-input-inline" style="width: 500px">
									<input type="text"  name="phone" id="phone"  placeholder="请输入手机号" lay-verify="phone" autocomplete="off" class="layui-input">
								</div>
							</div>

							<div class="layui-form-item">
								<label class="layui-form-label">邮箱</label>
								<div class=" layui-input-inline" style="width: 500px">
									<input type="text"  name="email" id="email"  placeholder="请输入邮箱" lay-verify="email" autocomplete="off" class="layui-input">
								</div>
							</div>


							<div class="layui-form-item">
								<label class="layui-form-label">备注</label>
								<div class=" layui-input-inline" style="width: 500px">
									<textarea type="text" class="layui-textarea" style="width:500px;height:120px;resize:none;" id="remark" name="remark"
											  placeholder="备注"></textarea>
								</div>
							</div>

						</form>
							<div  class="layui-form-item">
								<label class="layui-input-block"></label>
								<a class="gbn gbn-m" href="javascript:" onclick="E.save();" >保存</a>
								<a class="gbn gbn-m gbn-red" href="javascript:" onclick="history.back();" >返回</a>
							</div>
					</div>
				</div>
			</div>
	    </div>
	</div>
</body>
<#include "../common/layui_init.html">
<script type="text/javascript">
	window.onload = window.onresize = function() {
	  $(".J_containerWarp").height($(window).height() - 60);
	  $(".J_containerWarp").niceScroll({});
	}
	var E={
			save:function(){
				var para=paraArrayToLiteral($("#form1").serializeArray());
				if(para.password!=''){
					para.password=$.md5(para.password);
				}
				$.post("${request.contextPath}/user/save",para,function(o){
					if(o.code==0){
						layer.msg(o.msg);
						//Message.success("操作成功");
						//location.href=document.referrer;
					}else{
						layer.alert(o.msg, {
							skin: 'layui-layer-molv' //样式类名
							,closeBtn: 0
							,title:"错误提示"
						});
					}
				});
			},
			load:function(){
				$.getJSON("${request.contextPath}/user/getById",{id:$("#id").val()},function(o){
					if(o.code ==0){
						$("#form1").setFormValues(o.data);
					}
				});
			}
				
	}
	$(function(){
		var id=$("#id").val()
		if(id!=null&&id!=""){
			E.load();	
		}
	});
</script>
		<#include "../common/footer-inner.html"> 
</html>
